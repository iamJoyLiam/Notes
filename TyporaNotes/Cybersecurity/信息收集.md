## 一、域名信息收集

#### 网站收集

> whois 信息查询

```http
# 站长之家 whois 信息查询
https://whois.chinaz.com/
# 中国万网域名 whois 信息查询
https://whois.aliyun.com/
# 西部数码域名 whois 信息查询
https://whois.west.cn/
# 新网域名 whois 信息查询
https://whois.xinnet.com/
# 纳网域 whois 信息查询
https://whois.nawang.cn/
# 中资源域名 whois 信息查询
https://www.zzy.cn/domain/whois.html
# 三五互联域名 whois 信息查询
https://cp.35.com/chinese/whois.php
# 新网互联域名 whois 信息查询
https://www.dns.com.cn/show/domain/whois/index.do
# 美橙互联域名 whois 信息查询
https://whois.cndns.com/
# 爱名网域名 whois 信息查询
https://www.22.cn/domain/
# 易名网域名 whois 信息查询
https://whois.ename.net/
```

> 子域名查询

```http
# 站长之家子域名查询
https://tool.chinaz.com/subdomain/
# 查询网子域名查询
https://site.ip138.com/
```

> icp 备案号查询

```http
https://beian.miit.gov.cn/#/Integrated/recordQuery
```



#### 工具收集

- 子域名收集工具

  > JS 文件探测域名，有时候站点页面上需要很多数据，那么在页面的 js 源代码中可能会有很多网址，因为要 到这些网址中去请求页面展示的数据，可能会到很多站点中请求，这时候就能提取出好多子域名。

  ```http
  https://github.com/Threezh1/JSFinder
  # python JSFinder.py -u https://www.mi.com
  # 安装requests模块:
   pip install requests
   pip install bs4
  ```

- Layer子域名挖掘机

  ```http
  https://www.webshell.cc/6384.html
  5.0新版：https://pan.baidu.com/s/1wEP_Ysg4qsFbm_k1aoncpg 提取码：uk1j
  ```

- OneForAll、subDomainsBrute、Sublist3r等

  ```http
  # 建议使用python3运行
  https://github.com/shmilylty/OneForAll
  # pip install -r requirements.txt #requirements.txt是运行这个工具需要的python依赖包环境
  https://github.com/lijiejie/subDomainsBrute
  https://github.com/aboul3la/Sublist3r  # 这个比较老了
  ```

#### 主干

1. 域名注册信息（ whois 查询）
2. SEO 信息收集
3. 子域名收集
4. 域名备案信息查询
5. icp 备案号查询
6. ssl 证书查询

## 二、真实 IP 收集

#### CDN 绕过工具

1. 使用工具，效果不佳

   ```http
   https://github.com/Tai7sy/fuckcdn
   工具2：w8fuckcdn
   https://github.com/boy-hack/w8fuckcdn
   ```

2. 历史 DNS 解析

   > 这种历史记录查询，有可能能够找到它没有使用 CDN 之前的真是 IP 地址

   ```http
   https://x.threatbook.com/v5/domain/wulaoban.top
   https://dnsdb.io/zh-cn/ ###DNS查询
   https://x.threatbook.cn/ ###微步在线
   http://toolbar.netcraft.com/site_report?url=www.wulaoban.top ###在线域名信息查询
   http://viewdns.info/ ###DNS、IP等查询
   https://tools.ipip.net/cdn.php ###CDN查询IP
   https://securitytrails.com/domain/wulaoban.top/dns
   ```

#### 主干

1. 超级 ping（网站/工具）

   >超级 ping 能进行多地 ping 某个网址，可以理解为地域对同一个域名进行 ping 操作，就会看到 ping 出来的 IP地址不同，那么就可以理解是 CDN 没错了

2. ping（cmd）

   >通过 ping 来判断是否使用 CDN

3. nslookup（cmd）

   > 查询 DNS 的记录，查看域名解析是否正常，在网络故障的时候用来诊断网络问题的工具，通过它可以尝试获取一个域名对应的 IP 地址

   ```sh
   命令格式：nslookup domain[dns-server]
   
   示例：nslookup wulaoban.top
   
   还可以指定查询的DNS记录类型
   命令格式：nslookup -qt=type domain[dns-server]
   
   示例：nslookup -qt=CNAME wulaoban.top
   ```

4. dig（shell）

   ```shell
   dig wulaoban.top
   ```

## 三、收集旁站和 C 段 IP

> 旁站：一般是指的是同ip，也就是同服务器下的不同站点，比如我们前面使用IIS部署了多个网站在同一 个ip下。 什么是C段：比如在：127.127.127.4 这个IP上面有一个网站 127.4 这个服务器上面有网站我们可以想 想..他是一个非常大的站几乎没什么漏洞！但是在他同C段 127.127.127.1~127.127.127.255 这 1~255 上面也有服务器而且也有网站并且存在漏洞,那么我们就可以来渗透 1~255任何一个站 之后提权来嗅探 得到127.4 这台服务器的密码 甚至3389连接的密码后台登录的密码 如果运气好会得到很多的密码…
